function sendCmd(e){var t=new XMLHttpRequest;t.open("GET","/command/?cmd="+e,true);t.onreadystatechange=function(){if(this.readyState===4){if(this.status>=200&&this.status<400){}else{}}};t.send();t=null}function checkWebSocket(){if(window.WebSocket){return"websocket"}else{return"longpolling"}}function checkWorkers(){if(window.Worker&&window.Blob||Modernizr.webworkers&&Modernizr.blobconstructor){return true}else{return false}}function parsePath(e){var t=e&&e.length?e.lastIndexOf("/"):0;var n="";if(t&&t!==-1){n=e.slice(0,t)}return n}function refreshTimer(e,t,n){var r=$("#countdown-display");r.countdown("destroy");r.countdown({since:n!=="stop"||n!==undefined?-e:0,compact:true,format:"MS"});if(n!=="play"){r.countdown("pause")}}function refreshKnob(){window.clearInterval(GUI.currentKnob);var e=parseInt(GUI.json.song_percent)*10;var t=parseInt(GUI.json.time);var n=parseInt(1e3/t);var r=$("#time");r.val(e).trigger("change");if(GUI.state==="play"){GUI.currentKnob=setInterval(function(){e=e+(GUI.visibility!=="visible"?parseInt(1e3/t):1);r.val(e).trigger("change")},t)}}function timeConvert(e){var t=Math.floor(e/60);e-=t*60;var n=t<10?"0"+t:t;var r=e<10?"0"+e:e;return n+":"+r}function timeConvert2(e){var t=Math.floor(e/3600);var n=Math.floor((e-t*3600)/60);e=Math.floor(e-t*3600-n*60);if(t>0){if(t<10){t="0"+t}t+=":"}else{t=""}if(n<10){n="0"+n}if(e<10){e="0"+e}return t+n+":"+e}function countdownRestart(e){var t=$("#countdown-display").countdown("destroy");t.countdown({since:-e,compact:true,format:"MS"})}function setvol(e){$("#volume").val(e).trigger("change");GUI.volume=e;$("#volumemute").removeClass("btn-primary");sendCmd("setvol "+e)}function volumeStepCalc(e){var t=0;var n=e;GUI.volume=parseInt($("#volume").val());var r=function(r){t++;if(e==="up"){GUI.stepVolumeDelta=parseInt(GUI.volume)+t}else if(e==="dn"){GUI.stepVolumeDelta=parseInt(GUI.volume)-t}$("#volume").val(GUI.stepVolumeDelta).trigger("change")};r();GUI.stepVolumeInt=window.setInterval(function(){r()},200)}function volumeStepSet(){window.clearInterval(GUI.stepVolumeInt);setvol(GUI.stepVolumeDelta)}function customScroll(e,t,n){if(typeof n==="undefined"){n=500}var r=49;var i=parseInt($(window).height()/2);var s=$(window).scrollTop();var o=0;var u=0;if(e==="db"){o=parseInt(t*r-i);u=o}else if(e==="pl"){o=parseInt((t+2)*r-i);u=Math.abs(o-s);u=(o>s?"+":"-")+"="+u+"px";$("#playlist-entries").find("li").eq(t).addClass("active")}$.scrollTo(o>0?u:0,n)}function randomScrollPL(){var e=$(".playlist li").size();var t=1+Math.floor(Math.random()*e);customScroll("pl",t)}function randomScrollDB(){var e=$(".database li").size();var t=1+Math.floor(Math.random()*e);customScroll("db",t)}function customNotify(e){if(e.custom==="kernelswitch"){GUI.noticeUI.kernelswitch=new PNotify({title:"title"in e?e.title:"[missing title]",text:"text"in e?e.text:"[missing text]",icon:"fa fa-refresh",hide:false,confirm:{confirm:true,buttons:[{text:e.btntext,addClass:"btn-default btn-block  uppercase",click:function(){$.post("/settings/",{syscmd:"reboot"});$("#loader").removeClass("hide")}},{text:"Cancel",addClass:"hide"}]},buttons:{closer:false,sticker:false}})}}function renderMSG(e){var t=e[0];if("custom"in t&&t.custom!==null){customNotify(t);return}var n={title:"title"in t?t.title:"[missing title]",text:"text"in t?t.text:"[missing text]",icon:t.icon===undefined?"fa fa-check":t.icon,opacity:t.opacity===undefined?.9:t.opacity,hide:t.hide===undefined&&t.permanotice===undefined,buttons:{closer:t.permanotice===undefined,sticker:t.permanotice===undefined},delay:t.delay===undefined?8e3:t.delay,mouse_reset:false};if("permanotice"in t){if(GUI.noticeUI[t.permanotice]===undefined){GUI.noticeUI[t.permanotice]=new PNotify(n)}else{if("permaremove"in t){GUI.noticeUI[t.permanotice].remove();GUI.noticeUI[t.permanotice]=undefined}else{GUI.noticeUI[t.permanotice].open()}}}else{new PNotify(n)}}function sortOrder(e){var t=$("#"+e).index();e=parseInt(e.replace("pl-",""));sendCmd("moveid "+e+" "+t)}function loadingSpinner(e,t){if(t==="hide"){if(e==="db"){$("#spinner-db").addClass("hide")}if(e==="pl"){$("#spinner-pl").addClass("hide")}}else{if(e==="db"){$("#spinner-db").removeClass("hide")}if(e==="pl"){$("#spinner-pl").removeClass("hide")}}}function setPlaybackSource(e){$("#overlay-playsource-open button").text(e);$("#overlay-playsource a").addClass("inactive");e=e.toLowerCase();$("#playsource-"+e).removeClass("inactive");$("#playlist-entries").removeClass(function(e,t){return(t.match(/(^|\s)playlist-\S+/g)||[]).join(" ")}).addClass("playlist-"+e);$("#pl-manage").removeClass(function(e,t){return(t.match(/(^|\s)pl-manage-\S+/g)||[]).join(" ")}).addClass("pl-manage-"+e)}function renderLibraryHome(){loadingSpinner("db");$("#database-entries").addClass("hide");$("#db-level-up").addClass("hide");$("#db-homeSetup").removeClass("hide").removeClass("btn-primary").addClass("btn-default");$("#home-blocks").removeClass("hide");var e=0,t="";t='<div class="col-sm-12"><h1 class="txtmid">Browse your library</h1></div>';for(e=0;obj=GUI.libraryhome[e];e+=1){t+='<div class="col-md-4 col-sm-6">';if(obj.bookmark!==undefined&&obj.bookmark!==""){t+='<div id="home-bookmark-'+obj.bookmark+'" class="home-block home-bookmark" data-path="'+obj.path+'"><i class="fa fa-star"></i><h3>'+obj.name+"</h3>bookmark</div>"}else if(obj.localStorage!==undefined&&obj.localStorage!==""){if(obj.localStorage===0){t+=""}else{t+='<div id="home-local" class="home-block" data-path="LocalStorage"><i class="fa fa-sitemap"></i><h3>Local Storage ('+obj.localStorage+")</h3>local storages</div>"}}else if(obj.networkMounts!==undefined&&obj.networkMounts!==""){if(obj.networkMounts===0){t+='<a class="home-block" href="/sources/add/"><i class="fa fa-sitemap"></i><h3>Network mounts (0)</h3>click to add some</a>'}else{t+='<div id="home-nas" class="home-block" data-path="NAS"><i class="fa fa-sitemap"></i><h3>Network mounts ('+obj.networkMounts+")</h3>network attached storages</div>"}}else if(obj.USBMounts!==undefined&&obj.USBMounts!==""){if(obj.USBMounts===0){t+='<a id="home-usb" class="home-block" href="/sources"><i class="fa fa-hdd-o"></i><h3>USB storage (0)</h3>no USB storage plugged</a>'}else{t+='<div id="home-usb" class="home-block" data-path="USB"><i class="fa fa-hdd-o"></i><h3>USB storage ('+obj.USBMounts+")</h3>USB attached drives</div>"}}else if(obj.webradio!==undefined&&obj.webradio!==""){if(obj.webradio===0){t+='<a id="home-webradio" class="home-block" href="#" data-toggle="modal" data-target="#modal-webradio-add"><i class="fa fa-microphone"></i><h3>My Webradios (0)</h3>click to add some</a>'}else{t+='<div id="home-webradio" class="home-block" data-path="Webradio"><i class="fa fa-microphone"></i><h3>My Webradios ('+obj.webradio+")</h3>webradio local playlists</div>"}}else if(obj.Spotify!==undefined&&obj.Spotify!==""){if(obj.Spotify==="0"){t+='<a id="home-spotify" class="home-block" href="/settings/#features-management"><i class="fa fa-spotify"></i><h3>Spotify<span id="home-count-spotify"></span></h3>click to configure</a>'}else{t+='<div id="home-spotify" class="home-block" data-plugin="Spotify" data-path="Spotify"><i class="fa fa-spotify"></i><h3>Spotify<span id="home-count-spotify"></span></h3>music for everyone</div>'}}else if(obj.Dirble!==undefined&&obj.Dirble!==""){t+='<div id="home-dirble" class="home-block" data-plugin="Dirble" data-path="Dirble"><i class="fa fa-globe"></i><h3>Dirble <span id="home-count-dirble">('+obj.Dirble+")</span></h3>radio stations open directory</div>"}else{if(obj.ActivePlayer!==undefined&&obj.ActivePlayer!==""){setPlaybackSource(obj.ActivePlayer)}t+='<div id="home-jamendo" class="home-block" data-plugin="Jamendo" data-path="Jamendo"><i class="fa fa-play-circle-o"></i><h3>Jamendo<span id="home-count-jamendo"></span></h3>world\'s largest platform for free music</div>'}t+="</div>"}document.getElementById("home-blocks").innerHTML=t;loadingSpinner("db","hide");$("span","#db-currentpath").html("")}function refreshState(){var e=GUI.state;if(e==="play"){$("#play").addClass("btn-primary");$("i","#play").removeClass("fa fa-pause").addClass("fa fa-play");$("#stop").removeClass("btn-primary")}else if(e==="pause"){$("#playlist-position span").html("Not playing");$("#play").addClass("btn-primary");$("i","#play").removeClass("fa fa-play").addClass("fa fa-pause");$("#stop").removeClass("btn-primary")}else if(e==="stop"){$("#play").removeClass("btn-primary");$("i","#play").removeClass("fa fa-pause").addClass("fa fa-play");$("#stop").addClass("btn-primary");if($("#section-index").length){$("#countdown-display").countdown("destroy")}if(GUI.stream==="radio"){$("#total").html("<span>&infin;</span>")}else{$("#total").html("00:00")}$("#time").val(0).trigger("change");$("#format-bitrate").html("&nbsp;");$("li","#playlist-entries").removeClass("active")}if(e!=="stop"){if(GUI.stream==="radio"){$("#total").html("<span>&infin;</span>")}else{$("#total").html(GUI.json.time!==undefined?timeConvert(GUI.json.time):"00:00")}var t=GUI.json.audio_channels&&GUI.json.audio_sample_depth&&GUI.json.audio_sample_rate?GUI.json.audio_channels+", "+GUI.json.audio_sample_depth+" bit, "+GUI.json.audio_sample_rate+" kHz, "+GUI.json.bitrate+" kbps":"&nbsp;";$("#format-bitrate").html(t);$("li","#playlist-entries").removeClass("active");var n=parseInt(GUI.json.song);$("#playlist-entries").find("li").eq(n).addClass("active")}if(GUI.json.playlistlength&&GUI.json.playlistlength!=="0"){if(GUI.json.song){$("#playlist-position span").html("Playlist position "+(parseInt(GUI.json.song)+1)+"/"+GUI.json.playlistlength)}else{$("#playlist-position span").html("Playlist position 1/"+GUI.json.playlistlength)}}else{$("#playlist-position span").html("Empty queue, add some music!")}if(GUI.json.updating_db!==undefined){$("a","#open-panel-sx").html('<i class="fa fa-refresh fa-spin"></i> Updating')}else{$("a","#open-panel-sx").html('<i class="fa fa-music sx"></i> Library')}}function updateGUI(){var e=GUI.json.volume;var t=GUI.json.radioname;var n=GUI.json.currentartist;var r=GUI.json.currentsong;var i=GUI.json.currentalbum;GUI.stream=t!==null&&t!==undefined&&t!==""?"radio":"";refreshState();if($("#section-index").length){if(GUI.currentsong!==GUI.json.currentsong){countdownRestart(0);if($("#panel-dx").hasClass("active")){var s=parseInt(GUI.json.song);customScroll("pl",s)}}$("#volume").val(e==="-1"?100:e).trigger("change");if(GUI.stream!=="radio"){$("#currentartist").html(n===null||n===undefined||n===""?'<span class="notag">[no artist]</span>':n);$("#currentsong").html(r===null||r===undefined||r===""?'<span class="notag">[no title]</span>':r);$("#currentalbum").html(i===null||i===undefined||i===""?'<span class="notag">[no album]</span>':i)}else{$("#currentartist").html(n===null||n===undefined||n===""?t:n);$("#currentsong").html(r===null||r===undefined||r===""?t:r);$("#currentalbum").html('<span class="notag">streaming</span>')}if(GUI.json.repeat==="1"){$("#repeat").addClass("btn-primary")}else{$("#repeat").removeClass("btn-primary")}if(GUI.json.random==="1"){$("#random").addClass("btn-primary")}else{$("#random").removeClass("btn-primary")}if(GUI.json.consume==="1"){$("#consume").addClass("btn-primary")}else{$("#consume").removeClass("btn-primary")}if(GUI.json.single==="1"){$("#single").addClass("btn-primary")}else{$("#single").removeClass("btn-primary")}GUI.currentsong=r;var o=n+" - "+i;if(GUI.currentalbum!==o){if(t===null||t===undefined||t===""){var u=Math.floor(Math.random()*1001);$("#cover-art").css("background-image","url(/coverart/?v="+u+")")}else{$("#cover-art").css("background-image","url(assets/img/cover-radio.jpg")}}GUI.currentalbum=o}}function getPlaylistPlain(e){var t=parseInt(GUI.json.song)+1;var n=GUI.json.state;var r="",i="",s="",o="",u="",a="",f="",l="",c="",h=0,p="",d="",v="",m=0;var g,y,b=e.split("\n"),w=[];for(g=0;y=b[g];g+=1){w=y.split(": ");if("Time"===w[0]){i=parseInt(w[1])}else if("Artist"===w[0]){s=w[1]}else if("Title"===w[0]){u=w[1]}else if("Name"===w[0]){a=w[1]}else if("Album"===w[0]){o=w[1]}else if("file"===w[0]){f=w[1]}else if("Id"===w[0]){p=w[1];if(u===""||o===""){c=parsePath(f);l=f.split("/").pop();u=l;if(s===""){d="path: "+c}else{d=s}}else{d=s+" - "+o}if(a!==""){u='<i class="fa fa-microphone"></i>'+a;d="URL: "+(c==="")?f:c;v=""}else{v="<span>"+timeConvert2(i)+"</span>"}m++;r+='<li id="pl-'+p+'"'+(n!=="stop"&&m===t?' class="active"':"")+'><i class="fa fa-times-circle pl-action" title="Remove song from playlist"></i><span class="sn">'+u+v+'</span><span class="bl">'+d+"</span></li>";i="";s="";o="";u="";a=""}}$(".playlist").addClass("hide");$("#playlist-entries").removeClass("hide");var E=document.getElementById("playlist-entries");if(E){E.innerHTML=r}$("#pl-filter-results").addClass("hide").html("");$("#pl-filter").val("");$("#pl-manage").removeClass("hide");$("#pl-count").removeClass("hide").html(m+(m!==1?" entries":" entry"))}function getPlaylistCmd(){loadingSpinner("pl");$.ajax({url:"/db/?cmd=playlist",success:function(e){if(e.length>4){$(".playlist").addClass("hide");$("#playlist-entries").removeClass("hide");getPlaylistPlain(e);var t=parseInt(GUI.json.song);if($("#panel-dx").hasClass("active")&&GUI.currentsong!==GUI.json.currentsong){customScroll("pl",t,200)}}else{$(".playlist").addClass("hide");$("#playlist-warning").removeClass("hide");$("#pl-filter-results").addClass("hide").html("");$("#pl-count").removeClass("hide").html("0 entries")}loadingSpinner("pl","hide")}})}function getPlaylist(e){data=e[0];if(data.length>4){$(".playlist").addClass("hide");$("#playlist-entries").removeClass("hide");getPlaylistPlain(data);var t=parseInt(GUI.json.song);if($("#panel-dx").hasClass("active")&&GUI.currentsong!==GUI.json.currentsong){customScroll("pl",t,200)}}else{$(".playlist").addClass("hide");$("#playlist-warning").removeClass("hide");$("#pl-filter-results").addClass("hide").html("");$("#pl-count").removeClass("hide").html("0 entries")}loadingSpinner("pl","hide")}function renderUI(e){$("#loader").addClass("hide");GUI.json=e[0];GUI.state=GUI.json.state;updateGUI();if($("#section-index").length){var t=GUI.json.elapsed!==""&&GUI.json.elapsed!==undefined?GUI.json.elapsed:0;var n=GUI.json.time!==""&&GUI.json.time!==undefined&&GUI.json.time!==null?GUI.json.time:0;refreshTimer(parseInt(t),parseInt(n),GUI.json.state);if(GUI.stream!=="radio"){refreshKnob()}else{$("#time").val(0).trigger("change")}if(GUI.json.playlist!==GUI.playlist){getPlaylistCmd();GUI.playlist=GUI.json.playlist}}}function renderPlaylists(e){var t="",n="";var r,i,s=e.split("\n"),o=[];for(r=0;i=s[r];r+=1){o=i.split(": ");if("playlist"===o[0]){n=o[1];t+='<li class="pl-folder" data-path="'+n+'"><i class="fa fa-bars pl-action" data-target="#context-menu-playlist" data-toggle="context" title="Actions"></i><span><i class="fa fa-list-ol"></i>'+n+"</span></li>";n=""}}document.getElementById("playlist-entries").innerHTML="";$(".playlist").addClass("hide");$("#pl-manage").addClass("hide");$("#pl-count").addClass("hide");$("#pl-filter-results").removeClass("hide").addClass("back-to-queue").html('<i class="fa fa-arrow-left sx"></i> to queue');$("#pl-currentpath").removeClass("hide");$("#pl-editor").removeClass("hide");document.getElementById("pl-editor").innerHTML=t;loadingSpinner("pl","hide")}function getPlaylists(){loadingSpinner("pl");$.ajax({url:"/command/?cmd=listplaylists",success:function(e){renderPlaylists(e)}})}function parseResponse(e){var t=e.inputArr||"",n=e.respType||"",r=e.i||0,i=e.inpath||"",s=e.querytype||"",o="";switch(n){case"playlist":break;case"db":if(i===""&&t.file!==undefined){i=parsePath(t.file)}if(t.file!==undefined||i==="Webradio"){o='<li id="db-'+(r+1)+'" data-path="';if(t.Title!==undefined){o+=t.file;o+='"><i class="fa fa-bars db-action" title="Actions" data-toggle="context" data-target="#context-menu-file"></i><i class="fa fa-music db-icon"></i><span class="sn">';o+=t.Title+" <span>"+timeConvert(t.Time)+"</span></span>";o+=' <span class="bl">';o+=t.Artist;o+=" - ";o+=t.Album}else{if(i!=="Webradio"){o+=t.file;o+='"><i class="fa fa-bars db-action" title="Actions" data-toggle="context" data-target="#context-menu"></i><i class="fa fa-music db-icon"></i><span class="sn">';o+=t.file.replace(i+"/","")+" <span>"+timeConvert(t.Time)+"</span></span>";o+='<span class="bl">';o+=" path: ";o+=i}else{o+=t.playlist;o+='"><i class="fa fa-bars db-action" title="Actions" data-toggle="context" data-target="#context-menu-webradio"></i><i class="fa fa-microphone db-icon db-radio"></i>';o+='<span class="sn">'+t.playlist.replace(i+"/","").replace("."+t.fileext,"");o+='</span><span class="bl">webradio'}}o+="</span></li>"}else if(t.playlist!==undefined){o+=""}else{o='<li id="db-'+(r+1)+'" class="db-folder" data-path="';o+=t.directory;if(i!==""){o+='"><i class="fa fa-bars db-action" title="Actions" data-toggle="context" data-target="#context-menu"></i><span><i class="fa fa-folder-open"></i>'}else{o+='"><i class="fa fa-bars db-action" title="Actions" data-toggle="context" data-target="#context-menu-root"></i><i class="fa fa-hdd-o icon-root"></i><span>'}o+=t.directory.replace(i+"/","");o+="</span></li>"}break;case"Spotify":if(s===""){o='<li id="db-'+(r+1)+'" class="db-spotify db-folder" data-path="';o+=t.index;o+='"><i class="fa fa-bars db-action" title="Actions" data-toggle="context" data-target="#context-menu-spotify-pl"></i><span><i class="fa fa-folder-open"></i>';o+=t.name!==""?t.name:"Favorites";o+=" (";o+=t.tracks;o+=")</span></li>"}else if(s==="tracks"){o='<li id="db-'+(r+1)+'" class="db-spotify" data-path="';o+=t.index;o+='" data-plid="';o+=i;o+='" data-type="spotify-track"><i class="fa fa-bars db-action" title="Actions" data-toggle="context" data-target="#context-menu-spotify"></i><i class="fa fa-spotify db-icon"></i><span class="sn">';o+=t.title+" <span>"+timeConvert(t.duration/1e3)+"</span></span>";o+=' <span class="bl">';o+=t.artist;o+=" - ";o+=t.album;o+="</span></li>"}break;case"Dirble":if(s===""){o='<li id="db-'+(r+1)+'" class="db-dirble db-folder" data-path="';o+=t.id;o+='"><span><i class="fa fa-folder-open"></i>';o+=t.name;o+="</span></li>"}else if(s==="stations"){o='<li id="db-'+(r+1)+'" class="db-dirble db-radio" data-path="';o+=t.name+" | "+t.streamurl;o+='"><i class="fa fa-bars db-action" title="Actions" data-toggle="context" data-target="#context-menu-dirble"></i><i class="fa fa-microphone db-icon"></i>';o+='<span class="sn">'+t.name+" <span>"+t.bitrate+"</span></span>";o+='<span class="bl">';o+=t.website;o+="</span></li>"}break;case"Jamendo":o='<li id="db-'+(r+1)+'" class="db-jamendo db-folder" data-path="';o+=t.stream;o+='"><img class="jamendo-cover" src="/tun/'+t.image+'" alt=""><i class="fa fa-bars db-action" title="Actions" data-toggle="context" data-target="#context-menu-file"></i>';o+=t.dispname+"</div></li>";break}return o}function populateDB(e){var t=e.data||"",n=e.path||"",r=e.uplevel||0,i=e.keyword||"",s=e.plugin||"",o=e.querytype||"",u=e.args||"",a="",f=0,l=[];if(s!==""){if(s==="Spotify"){$("#database-entries").removeClass("hide");$("#db-level-up").removeClass("hide");$("#home-blocks").addClass("hide");if(n){GUI.currentpath=n}document.getElementById("database-entries").innerHTML="";t=o==="tracks"?t.tracks:t.playlists;for(f=0;l=t[f];f+=1){a+=parseResponse({inputArr:l,respType:"Spotify",i:f,querytype:o,inpath:u})}document.getElementById("database-entries").innerHTML=a}if(s==="Dirble"){$("#database-entries").removeClass("hide");$("#db-level-up").removeClass("hide");$("#home-blocks").addClass("hide");if(n){GUI.currentpath=n}document.getElementById("database-entries").innerHTML="";for(f=0;l=t[f];f+=1){a+=parseResponse({inputArr:l,respType:"Dirble",i:f,querytype:o})}document.getElementById("database-entries").innerHTML=a}if(s==="Jamendo"){$("#database-entries").removeClass("hide");$("#db-level-up").removeClass("hide");$("#home-blocks").addClass("hide");if(n){GUI.currentpath=n}document.getElementById("database-entries").innerHTML="";for(f=0;l=t[f];f+=1){a+=parseResponse({inputArr:l,respType:"Jamendo",i:f,querytype:o})}document.getElementById("database-entries").innerHTML=a}}else{if(n===""&&i===""){renderLibraryHome();return}else{$("#database-entries").removeClass("hide");$("#db-level-up").removeClass("hide");$("#home-blocks").addClass("hide");if(n){GUI.currentpath=n}document.getElementById("database-entries").innerHTML="";if(i!==""){var c=t.length?t.length:"0";var h=t.length===1?"":"s";$("#db-level-up").addClass("hide");$("#db-search-results").removeClass("hide").html('<i class="fa fa-times sx"></i><span class="visible-xs-inline">back</span><span class="hidden-xs">'+c+" result"+h+' for "<span class="keyword">'+i+'</span>"</span>')}for(f=0;l=t[f];f+=1){a+=parseResponse({inputArr:l,respType:"db",i:f,inpath:n})}if(n==="Webradio"){a+='<li id="webradio-add" class="db-webradio-add"><i class="fa fa-plus-circle db-icon"></i><span class="sn"><em>add new</em></span><span class="bl">add a webradio to your library</span></li>'}document.getElementById("database-entries").innerHTML=a}}$("span","#db-currentpath").html(n);$("#db-homeSetup").addClass("hide");if(r){$("#db-"+GUI.currentDBpos[GUI.currentDBpos[10]]).addClass("active");customScroll("db",GUI.currentDBpos[GUI.currentDBpos[10]],0)}else{customScroll("db",0,0)}loadingSpinner("db","hide")}function getDB(e){var t=e.cmd||"filepath",n=e.path||"",r=e.browsemode||"",i=e.uplevel||"",s=e.plugin||"",o=e.querytype||"",u=e.args||"";loadingSpinner("db");if(s!==""){if(s==="Spotify"){$.post("/db/?cmd=spotify",{plid:u},function(e){populateDB({data:e,path:n,plugin:s,querytype:o,uplevel:i,args:u})},"json")}else if(s==="Dirble"){$.post("/db/?cmd=dirble",{querytype:o===""?"categories":o,args:u},function(e){populateDB({data:e,path:n,plugin:s,querytype:o,uplevel:i})},"json")}else if(s==="Jamendo"){$.post("/db/?cmd=jamendo",{querytype:o===""?"radio":o,args:u},function(e){populateDB({data:e.results,path:n,plugin:s,querytype:o})},"json")}}else{if(t==="search"){var a=$("#db-search-keyword").val();$.post("/db/?querytype="+r+"&cmd=search",{query:a},function(e){populateDB({data:e,path:n,uplevel:i,keyword:a})},"json")}else if(t==="filepath"){$.post("/db/?cmd=filepath",{path:n},function(e){populateDB({data:e,path:n,uplevel:i})},"json")}else{loadingSpinner("db","hide");$.post("/db/?cmd="+t,{path:n,querytype:o},function(e){},"json")}}}function onreleaseKnob(e){if(GUI.state!=="stop"&&GUI.state!==""){if(GUI.stream!=="radio"){window.clearInterval(GUI.currentKnob);var t=Math.floor(e*parseInt(GUI.json.time)/1e3);sendCmd("seek "+GUI.json.song+" "+t);$("#time").val(e);$("#countdown-display").countdown("destroy");$("#countdown-display").countdown({since:-t,compact:true,format:"MS"})}else{$("#time").val(0).trigger("change")}}}function commandButton(e){var t=e.data("cmd");var n;if(t==="stop"){e.addClass("btn-primary");$("#play").removeClass("btn-primary");if($("#section-index").length){refreshTimer(0,0,"stop");window.clearInterval(GUI.currentKnob);$(".playlist").find("li").removeClass("active");$("#total").html("00:00")}}else if(t==="play"){var r=GUI.state;if(r==="play"){n="pause";if($("#section-index").length){$("#countdown-display").countdown("pause")}}else if(r==="pause"){n="play";if($("#section-index").length){$("#countdown-display").countdown("resume")}}else if(r==="stop"){n="play";if($("#section-index").length){$("#countdown-display").countdown({since:0,compact:true,format:"MS"})}}window.clearInterval(GUI.currentKnob);sendCmd(n);return}else if(t==="previous"||t==="next"){if($("#section-index").length){$("#countdown-display").countdown("pause");window.clearInterval(GUI.currentKnob)}}else if(e.hasClass("btn-volume")){var i;var s=parseInt($("#volume").val());if(GUI.volume===null){GUI.volume=s}if(t==="volumedn"&&parseInt(GUI.volume)>0){i=parseInt(GUI.volume)-1;GUI.volume=i;$("#volumemute").removeClass("btn-primary")}else if(t==="volumeup"&&parseInt(GUI.volume)<100){i=parseInt(GUI.volume)+1;GUI.volume=i;$("#volumemute").removeClass("btn-primary")}else if(t==="volumemute"){if(s!==0){GUI.volume=s;e.addClass("btn-primary");i=0}else{e.removeClass("btn-primary");setvol(GUI.volume)}}if(i>=0&&i<=100){sendCmd("setvol "+i)}return}if(e.hasClass("btn-toggle")){n=t+(e.hasClass("btn-primary")?" 0":" 1");e.toggleClass("btn-primary")}else{n=t}sendCmd(n)}function libraryHome(e){GUI.libraryhome=e[0];renderLibraryHome()}function listWLANs(e){var t=0,n="",r="",i="",s=e[0];$.each(s,function(e){n+='<p><a href="/network/wlan/'+s[e].nic+"/"+s[e].ESSID+'" class="btn btn-lg btn-default btn-block" title="See network properties">';if(s[e].connected!==0){n+='<i class="fa fa-check green sx"></i>'}if(s[e].storedprofile===1&&s[e].encryption==="on"){n+='<i class="fa fa-lock sx"></i>'}else{if(s[e].encryption==="on"){n+='<i class="fa fa-rss fa-wifi"></i><i class="fa fa-lock sx"></i>'}else{if(s[e].storedprofile!==1){n+='<i class="fa fa-rss fa-wifi sx"></i>'}}}n+="<strong>"+s[e].ESSID+"</strong></a></p>";if(s[e].storedprofile===1){i+=n}else{r+=n}n=""});if(r===""){r='<p><a class="btn btn-lg btn-default btn-block" href="#"><i class="fa fa-cog fa-spin sx"></i>scanning for networks...</a></p>'}document.getElementById("wifiNetworks").innerHTML=r;document.getElementById("wifiStored").innerHTML=i;$.ajax({url:"/command/?cmd=wifiscan"})}function nicsDetails(e){var t=0,n="",r=e[0];$.each(r,function(e){if(e===$("#nic-details").data("name")){n+="<tr><th>Name:</th><td><strong>"+e+"<strong></td></tr>";n+="<tr><th>Type:</th><td>wireless</td></tr>";if(r[e].currentssid==="off/any"){n+='<tr><th>Status:</th><td><i class="fa fa-times red sx"></i>no network connected</td></tr>'}else{n+='<tr><th>Status:</th><td><i class="fa fa-check green sx"></i>connected</td></tr>';n+="<tr><th>Associated SSID:</th><td><strong>"+r[e].currentssid+"</strong></td></tr>"}n+="<tr><th>Assigned IP:</th><td>"+(r[e].ip!==null?"<strong>"+r[e].ip+"</strong>":"none")+"</td></tr>";n+="<tr><th>Speed:</th><td>"+(r[e].speed!==null?r[e].speed:"unknown")+"</td></tr>"}});$("#nic-details tbody").html(n)}function playbackChannel(){var e=new PushStream({host:window.location.hostname,port:window.location.port,modes:GUI.mode,reconnectOnChannelUnavailableInterval:5e3});e.onmessage=renderUI;e.onstatuschange=function(e){if(e===2){sendCmd("renderui")}else{if(e===0){$("#loader").removeClass("hide")}}};e.addChannel("playback");e.connect()}function queueChannel(){var e=new PushStream({host:window.location.hostname,port:window.location.port,modes:GUI.mode});e.onmessage=getPlaylist;e.addChannel("queue");e.connect()}function libraryChannel(){var e=new PushStream({host:window.location.hostname,port:window.location.port,modes:GUI.mode});e.onmessage=libraryHome;e.addChannel("library");e.connect()}function notifyChannel(){var e=new PushStream({host:window.location.hostname,port:window.location.port,modes:GUI.mode});e.onmessage=renderMSG;e.addChannel("notify");e.connect()}function wlansChannel(){var e=new PushStream({host:window.location.hostname,port:window.location.port,modes:GUI.mode});e.onmessage=listWLANs;e.addChannel("wlans");e.connect();$.ajax({url:"/command/?cmd=wifiscan"})}function nicsChannel(){var e=new PushStream({host:window.location.hostname,port:window.location.port,modes:GUI.mode});e.onmessage=nicsDetails;e.addChannel("nics");e.connect()}function overlayTrigger(e){function i(){if(t.hasClass("open")){t.removeClass("open");t.addClass("closed");var n=function(e){if(support.transitions){if(e.propertyName!=="visibility"){return}this.removeEventListener(transEndEventName,n)}t.removeClass("closed")}}else if(t.hasClass("closed")){t.addClass("open");if(e==="#overlay-social"){var r="https://twitter.com/home?status=Listening+to+"+GUI.json.currentsong.replace(/\s+/g,"+")+"+by+"+GUI.json.currentartist.replace(/\s+/g,"+")+"+on+%40RuneAudio+http%3A%2F%2Fwww.runeaudio.com%2F+%23nowplaying";var i="https://www.facebook.com/sharer.php?u=http%3A%2F%2Fwww.runeaudio.com%2F&display=popup";var s="https://plus.google.com/share?url=http%3A%2F%2Fwww.runeaudio.com%2F";$("#urlTwitter").attr("href",r);$("#urlFacebook").attr("href",i);$("#urlGooglePlus").attr("href",s)}}}var t=$(e),n=$(e+"-open"),r=$(e+"-close");transEndEventNames={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"};n.click(function(){i()});r.click(function(){i()})}var GUI={DBentry:["","",""],DBupdate:0,browsemode:"file",currentDBpos:[0,0,0,0,0,0,0,0,0,0,0],currentalbum:null,currentknob:null,currentpath:"",currentsong:null,json:0,libraryhome:"",mode:"websocket",noticeUI:{},playlist:null,plugin:"",state:"",stepVolumeDelta:0,stepVolumeInt:0,stream:"",visibility:"visible",volume:null};(function(){function e(e){var t="visible",n="hidden",r={focus:t,focusin:t,pageshow:t,blur:n,focusout:n,pagehide:n};e=e||window.event;if(e.type in r){document.body.className=r[e.type]}else{document.body.className=this[hidden]?"hidden":"visible";if(this[hidden]){GUI.visibility="hidden"}else{GUI.visibility="visible"}}}hidden="hidden";if(hidden in document){document.addEventListener("visibilitychange",e)}else if((hidden="mozHidden")in document){document.addEventListener("mozvisibilitychange",e)}else if((hidden="webkitHidden")in document){document.addEventListener("webkitvisibilitychange",e)}else if((hidden="msHidden")in document){document.addEventListener("msvisibilitychange",e)}else if("onfocusin"in document){document.onfocusin=document.onfocusout=e}else{window.onpageshow=window.onpagehide=window.onfocus=window.onblur=e}})();if($("#section-index").length){jQuery(document).ready(function(e){"use strict";GUI.mode=checkWebSocket();playbackChannel();libraryChannel();PNotify.prototype.options.styling="fontawesome";PNotify.prototype.options.stack.dir1="up";PNotify.prototype.options.stack.dir2="left";PNotify.prototype.options.stack.firstpos1=90;PNotify.prototype.options.stack.firstpos2=50;PNotify.prototype.options.stack.spacing1=10;PNotify.prototype.options.stack.spacing2=10;notifyChannel();e(".btn-cmd").click(function(){var t=e(this);commandButton(t)});e("#volume-step-dn").on({mousedown:function(){volumeStepCalc("dn")},mouseup:function(){volumeStepSet()}});e("#volume-step-up").on({mousedown:function(){volumeStepCalc("up")},mouseup:function(){volumeStepSet()}});e(".playbackknob").knob({inline:false,change:function(t){if(GUI.state!=="stop"){window.clearInterval(GUI.currentKnob)}else{e("#time").val(0).trigger("change")}},release:function(e){onreleaseKnob(e)}});e(".volumeknob").knob({change:function(e){},release:function(e){setvol(e)},draw:function(){if(this.$.data("skin")==="tron"){this.cursorExt=.05;var e=this.arc(this.cv),t,n=1;this.g.lineWidth=this.lineWidth;if(this.o.displayPrevious){t=this.arc(this.v);this.g.beginPath();this.g.strokeStyle=this.pColor;this.g.arc(this.xy,this.xy,this.radius-this.lineWidth,t.s,t.e,t.d);this.g.stroke()}this.g.beginPath();this.g.strokeStyle=n?this.o.fgColor:this.fgColor;this.g.arc(this.xy,this.xy,this.radius-this.lineWidth,e.s,e.e,e.d);this.g.stroke();this.g.lineWidth=2;this.g.beginPath();this.g.strokeStyle=this.o.fgColor;this.g.arc(this.xy,this.xy,this.radius-this.lineWidth+10+this.lineWidth*2/3,0,2*Math.PI,false);this.g.stroke();return false}}});var t=e("#playlist-entries");t.on("click","li",function(t){var n="";if(e(t.target).hasClass("pl-action")){t.preventDefault();var r=e(this).attr("id");r=parseInt(r.replace("pl-",""));n="deleteid "+r;sendCmd(n)}else{var i=e("li","#playlist-entries").index(this);n="play "+i;sendCmd(n);e("li.active","#playlist-entries").removeClass("active");e(this).addClass("active")}});e("a","#open-panel-dx").click(function(){if(e("#open-panel-dx").hasClass("active")){var t=parseInt(GUI.json.song);customScroll("pl",t,500)}}).on("shown.bs.tab",function(e){var t=parseInt(GUI.json.song);customScroll("pl",t,0)});e("#open-library").click(function(){e("#open-panel-dx").removeClass("active");e("#open-panel-sx").addClass("active")});e("#pl-filter").keyup(function(){e.scrollTo(0,500);var t=e(this).val(),n=0;e("li","#playlist-entries").each(function(){var r=e(this);if(r.text().search(new RegExp(t,"i"))<0){r.hide()}else{r.show();n++}});var r=n;var i=n===1?"":"s";if(t!==""){e("#pl-count").addClass("hide");e("#pl-filter-results").removeClass("hide").html('<i class="fa fa-times sx"></i><span class="visible-xs-inline">back</span><span class="hidden-xs">'+ +n+" result"+i+' for "<span class="keyword">'+t+'</span>"</span>')}else{e("#pl-count").removeClass("hide");e("#pl-filter-results").addClass("hide").html("")}});e("#pl-filter-results").click(function(){e(this).addClass("hide");e("#pl-count").removeClass("hide");if(e(this).hasClass("back-to-queue")){e(".playlist").addClass("hide");getPlaylistCmd();e("#pl-currentpath").addClass("hide");e("#pl-manage").removeClass("hide")}else{e("li","#playlist-entries").each(function(){var t=e(this);t.show()});e("#pl-currentpath").removeClass("hide");e("#pl-filter").val("")}customScroll("pl",parseInt(GUI.json.song),500)});e("#pl-manage-list").click(function(){getPlaylists()});e("#modal-pl-save-btn").click(function(){var t=e("#pl-save-name").val();sendCmd('save "'+t+'"')});e("#pl-editor").on("click",".pl-action",function(t){t.preventDefault();var n=e(this).parent().attr("data-path");GUI.DBentry[0]=n});e("#pl-rename-button").click(function(){var t=e("#pl-rename-oldname").text();var n=e("#pl-rename-name").val();sendCmd('rename "'+t+'" "'+n+'"');getPlaylists()});var n=document.getElementById("playlist-entries");new Sortable(n,{ghostClass:"sortable-ghost",onUpdate:function(e){sortOrder(e.item.getAttribute("id"))}});e("a","#open-panel-sx").click(function(){if(e("#open-panel-sx").hasClass("active")){customScroll("pl",parseInt(GUI.json.song),500)}}).on("shown.bs.tab",function(e){customScroll("db",GUI.currentDBpos[GUI.currentDBpos[10]],0)});e("#home-blocks").on("click",".home-block",function(t){if(e(t.target).is("span.block-remove")){var n=e(this).attr("id");n=n.replace("home-bookmark-","");var r=e(this).find("h3").text();e.post("/db/?cmd=bookmark",{id:n,name:r})}else{++GUI.currentDBpos[10];getDB({path:e(this).data("path"),browsemode:GUI.browsemode,uplevel:0,plugin:e(this).data("plugin")})}});e("#db-homeSetup").click(function(){var t=e(this);if(t.hasClass("btn-primary")){t.removeClass("btn-primary").addClass("btn-default");e(".home-block-remove").remove()}else{t.removeClass("btn-default").addClass("btn-primary");e(".home-block.home-bookmark").append('<div class="home-block-remove" title="Remove this bookmark"><span class="block-remove">&times;</span></div>')}});var r=e("#database-entries");r.on("click","li",function(t){var n="";var r=e(this);if(e(t.target).hasClass("db-action")){t.preventDefault();if(r.attr("data-type")==="spotify-track"){n=r.attr("data-plid")+"-"+r.attr("data-path")}else{n=r.attr("data-path")}GUI.DBentry[0]=n}else{e("li.active","#database-entries").removeClass("active");r.addClass("active");if(r.hasClass("db-folder")){if(r.hasClass("db-spotify")){n=GUI.currentpath+"/"+r.find("span").text();getDB({path:n,browsemode:GUI.browsemode,plugin:"Spotify",args:r.data("path").toString(),querytype:"tracks"});GUI.plugin="Spotify"}else if(r.hasClass("db-dirble")){n=GUI.currentpath+"/"+r.find("span").text();getDB({path:n,browsemode:GUI.browsemode,plugin:"Dirble",querytype:"stations",args:r.data("path")});GUI.plugin="Dirble"}else if(r.hasClass("db-jamendo")){}else{n=r.data("path");getDB({path:n,browsemode:GUI.browsemode,uplevel:0})}var i=r.attr("id");i=i.replace("db-","");GUI.currentDBpos[GUI.currentDBpos[10]]=i;++GUI.currentDBpos[10]}else if(r.hasClass("db-webradio-add")){e("#modal-webradio-add").modal()}}});r.on("dblclick","li",function(t){if(!e(t.target).hasClass("db-action")){e("li.active","#database-entries").removeClass("active");e(this).addClass("active");var n=e(this).data("path");n=e(this).hasClass("db-dirble")?n.split(" | ")[1]:n;getDB({cmd:"addplay",path:n})}});e("#db-level-up").click(function(){--GUI.currentDBpos[10];var e=GUI.currentpath;if(GUI.currentDBpos[10]===0){e=""}else{var t=e.lastIndexOf("/");e=t!==-1?e.slice(0,t):""}getDB({path:e,browsemode:GUI.browsemode,plugin:GUI.plugin,uplevel:1});GUI.plugin=""});e("#db-search-results").click(function(){e(this).addClass("hide");e("#db-level-up").removeClass("hide");getDB({path:GUI.currentpath})});e("a",".context-menu").click(function(){var t=e(this).data("cmd");var n=e(this).data("type");var r=GUI.DBentry[0];GUI.DBentry[0]="";if(t==="pl-add"){sendCmd('load "'+r+'"')}else if(t==="pl-replace"){sendCmd("clear");sendCmd('load "'+r+'"')}else if(t==="pl-rename"){e("#modal-pl-rename").modal();e("#pl-rename-oldname").text(r)}else if(t==="pl-rm"){e.ajax({url:"/command/?cmd=rm%20%22"+r+"%22",success:function(e){getPlaylists(e)}})}else if(t==="wradd"){r=r.split(" | ")[1];getDB({cmd:"add",path:r})}else if(t==="wraddplay"){r=r.split(" | ")[1];getDB({cmd:"addplay",path:r})}else if(t==="wraddreplaceplay"){r=r.split(" | ")[1];getDB({cmd:"addreplaceplay",path:r})}else if(t==="wredit"){e("#modal-webradio-edit").modal();e.post("/db/?cmd=readradio",{filename:r},function(t){var n=e("#webradio-edit-name");n.val(t.name);n.data("file-name",t.name);e("#webradio-edit-url").val(t.url)},"json")}else if(t==="wrdelete"){e("#modal-webradio-delete").modal();e("#webradio-delete-name").text(r.replace("Webradio/",""))}else if(t==="wrsave"){var i=r.split(" | ");e.post("/db/?cmd=addradio",{"radio[label]":i[0],"radio[url]":i[1]})}else{getDB({cmd:t,path:r,querytype:n})}});e("#webradio-add-button").click(function(){var t=e("#webradio-add-name").val();var n=e("#webradio-add-url").val();if(t===""||n===""){renderMSG([{title:"Missing fields",text:"Please fill both fields to continue",icon:"fa fa-warning"}])}else{e.post("/db/?cmd=addradio",{"radio[label]":t,"radio[url]":n},function(e){},"json");e("#modal-webradio-add").modal("hide");e("#webradio-add-name").val("");e("#webradio-add-url").val("")}});e("#webradio-edit-button").click(function(){var t=e("#webradio-edit-name");e.post("/db/?cmd=editradio",{"radio[newlabel]":t.val(),"radio[label]":t.data("file-name"),"radio[url]":e("#webradio-edit-url").val()},function(e){},"json")});e("#webradio-delete-button").click(function(){var t=e("#webradio-delete-name").text();e.post("/db/?cmd=deleteradio",{"radio[label]":t},function(e){},"json")});e("a",".browse-mode").click(function(){e(".browse-mode").removeClass("active");e(this).parent().addClass("active").closest(".dropdown").removeClass("open");var t=e(this).find("span").html();GUI.browsemode=t.slice(0,-1);e("#browse-mode-current").html(GUI.browsemode);getDB({path:"",browsemode:GUI.browsemode})});e("#db-firstPage").click(function(){e.scrollTo(0,500)});e("#db-prevPage").click(function(){var t="-="+e(window).height()+"px";e.scrollTo(t,500)});e("#db-nextPage").click(function(){var t="+="+e(window).height()+"px";e.scrollTo(t,500)});e("#db-lastPage").click(function(){e.scrollTo("100%",500)});e("#pl-firstPage").click(function(){e.scrollTo(0,500)});e("#pl-prevPage").click(function(){var t=e(window).scrollTop();var n=t-e(window).height();e.scrollTo(n,500)});e("#pl-nextPage").click(function(){var t=e(window).scrollTop();var n=t+e(window).height();e.scrollTo(n,500)});e("#pl-lastPage").click(function(){e.scrollTo("100%",500)});var i=document.location.toString();if(i.match("#")){e('#menu-bottom a[href="/#'+i.split("#")[1]+'"]').tab("show")}e("#menu-bottom a").on("shown",function(e){if(history.pushState){history.pushState(null,null,e.target.hash)}else{window.location.hash=e.target.hash}}).on("click",function(){if(e("#overlay-social").hasClass("open")){e(".overlay-close").trigger("click")}});if(e(".ttip").length){e(".ttip").tooltip()}FastClick.attach(document.body);e("#syscmd-poweroff").click(function(){e.post("/settings/",{syscmd:"poweroff"});e("#loader").removeClass("hide")});e("#syscmd-reboot").click(function(){e.post("/settings/",{syscmd:"reboot"});e("#loader").removeClass("hide")});overlayTrigger("#overlay-social");overlayTrigger("#overlay-playsource");e("#playsource-mpd").click(function(){if(e(this).hasClass("inactive")){e.ajax({url:"/command/?switchplayer=MPD"})}});e("#playsource-spotify").click(function(){if(e(this).hasClass("inactive")){e.ajax({url:"/command/?switchplayer=Spotify"})}})})}else{jQuery(document).ready(function(e){"use strict";GUI.mode=checkWebSocket();playbackChannel();PNotify.prototype.options.styling="fontawesome";PNotify.prototype.options.stack.dir1="up";PNotify.prototype.options.stack.dir2="left";PNotify.prototype.options.stack.firstpos1=90;PNotify.prototype.options.stack.firstpos2=50;PNotify.prototype.options.stack.spacing1=10;PNotify.prototype.options.stack.spacing2=10;notifyChannel();e(".btn-cmd").click(function(){var t=e(this);commandButton(t)});e("#syscmd-poweroff").click(function(){e.post("/settings/",{syscmd:"poweroff"});e("#loader").removeClass("hide")});e("#syscmd-reboot").click(function(){e.post("/settings/",{syscmd:"reboot"});e("#loader").removeClass("hide")});e(".selectpicker").selectpicker();if(e("#section-sources").length){if(e("#mount-type").val()==="nfs"){e("#mount-cifs").addClass("disabled").children(".disabler").removeClass("hide")}e("#mount-type").change(function(){if(e(this).val()==="cifs"||e(this).val()==="osx"){e("#mount-cifs").removeClass("disabled").children(".disabler").addClass("hide")}else{e("#mount-cifs").addClass("disabled").children(".disabler").removeClass("hide")}});e("#nas-guest").change(function(){if(e(this).prop("checked")){e("#mount-auth").addClass("disabled").children(".disabler").removeClass("hide")}else{e("#mount-auth").removeClass("disabled").children(".disabler").addClass("hide")}});e("#nas-advanced").change(function(){if(e(this).prop("checked")){e("#mount-advanced-config").removeClass("hide")}else{e("#mount-advanced-config").addClass("hide")}});e("#show-mount-advanced-config").click(function(t){t.preventDefault();if(e(this).hasClass("active")){e("#mount-advanced-config").toggleClass("hide");e(this).removeClass("active");e(this).find("i").removeClass("fa fa-minus-circle").addClass("fa fa-plus-circle");e(this).find("span").html("show advanced options")}else{e("#mount-advanced-config").toggleClass("hide");e(this).addClass("active");e(this).find("i").removeClass("fa fa-plus-circle").addClass("fa fa-minus-circle");e(this).find("span").html("hide advanced options")}});e("#usb-mount-list a").click(function(){var t=e(this).data("mount");e("#usb-umount-name").html(t);e("#usb-umount").val(t)})}if(e("#section-settings").length){e("#airplay").change(function(){if(e(this).prop("checked")){e("#airplayName").removeClass("hide");e("#airplayBox").addClass("boxed-group")}else{e("#airplayName").addClass("hide");e("#airplayBox").removeClass("boxed-group")}});e("#scrobbling-lastfm").change(function(){if(e(this).prop("checked")){e("#lastfmAuth").removeClass("hide");e("#lastfmBox").addClass("boxed-group")}else{e("#lastfmAuth").addClass("hide");e("#lastfmBox").removeClass("boxed-group")}});e("#proxy").change(function(){if(e(this).prop("checked")){e("#proxyAuth").removeClass("hide");e("#proxyBox").addClass("boxed-group")}else{e("#proxyAuth").addClass("hide");e("#proxyBox").removeClass("boxed-group")}});e("#dlna").change(function(){if(e(this).prop("checked")){e("#dlnaName").removeClass("hide");e("#dlnaBox").addClass("boxed-group")}else{e("#dlnaName").addClass("hide");e("#dlnaBox").removeClass("boxed-group")}});e("#spotify").change(function(){if(e(this).prop("checked")){e("#spotifyAuth").removeClass("hide");e("#spotifyBox").addClass("boxed-group")}else{e("#spotifyAuth").addClass("hide");e("#spotifyBox").removeClass("boxed-group")}})}if(e("#section-network").length){var t=e("#network-manual-config");if(e("#dhcp").val()==="0"){t.removeClass("hide")}e("#dhcp").change(function(){if(e(this).val()==="0"){t.removeClass("hide")}else{t.addClass("hide")}});var n=e("#wifi-security-key");if(e("#wifi-security").val()!=="open"){n.removeClass("hide")}e("#wifi-security").change(function(){if(e(this).val()!=="open"){n.removeClass("hide")}else{n.addClass("hide")}});if(e("#wifiNetworks").length){wlansChannel();nicsChannel()}e("#wifiProfiles").change(function(){if(e(this).prop("checked")){e("#wifiProfilesBox").addClass("hide")}else{e("#wifiProfilesBox").removeClass("hide")}})}if(e("#section-mpd").length){e("#audio-output-interface").change(function(){renderMSG([{title:"Switching audio output",text:"Please wait for the config update...",icon:"fa fa-cog fa-spin",delay:5e3}]);var t=e(this).val();e.ajax({type:"POST",url:"/mpd/",data:{ao:t}})});e(".manual-edit-confirm").find(".btn-primary").click(function(){e("#mpdconf_editor").removeClass("hide");e("#manual-edit-warning").addClass("hide")})}if(e("#section-debug").length){ZeroClipboard.config({swfPath:"/assets/js/vendor/ZeroClipboard.swf"});var r=new ZeroClipboard(document.getElementById("copy-to-clipboard"));r.on("ready",function(e){r.on("aftercopy",function(e){new PNotify({title:"Copied to clipboard",text:"The debug output was copied successfully in your clipboard.",icon:"fa fa-check"})})})}})}
